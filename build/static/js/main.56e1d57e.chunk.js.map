{"version":3,"sources":["Clock.js","firebaseConfig.js","App.js","reportWebVitals.js","index.js"],"names":["Clock","props","timer","currentDate","React","useState","date","setDate","tick","Date","useEffect","timerID","setInterval","clearInterval","useNewTimer","className","toLocaleTimeString","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebase","initializeApp","auth","firestore","localBusStops","SignIn","signInWithGoogle","a","provider","GoogleAuthProvider","signInWithPopup","collection","doc","currentUser","uid","get","then","exists","console","log","account","useruid","name","displayName","email","busStops","set","href","onClick","StopInput","newStop","setNewStop","e","preventDefault","fetch","ok","push","userRef","update","FieldValue","arrayUnion","target","reset","alert","onSubmit","htmlFor","type","onChange","value","placeholder","maxLength","max","min","id","required","disabled","Arrivals","allStops","length","output","map","stops","index","busStopID","filter","stop","arrayRemove","toString","slice","times","tIndex","Actual","Route","DepartureText","DepartureTime","RouteDirection","App","useAuthState","user","initAllStops","setAllStops","getAllStops","Promise","all","busStop","getArrivals","data","stopNum","response","json","retrieveData","gg","SignOut","signOut","interval","getTime","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.56e1d57e.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\n\nfunction Clock(props) {\n  //Here we reference our custom hook\n  const timer = useNewTimer(new Date())\n\n  return (\n    <div>\n      <h1 className='time'>{timer.toLocaleTimeString()}</h1>\n    </div>\n  )\n}\n\nfunction useNewTimer(currentDate) {\n  const [date, setDate] = React.useState(currentDate)\n\n  React.useEffect(() => {\n    var timerID = setInterval(() => tick(), 1000)\n    return function cleanup() {\n      clearInterval(timerID)\n    }\n  })\n\n  function tick() {\n    setDate(new Date())\n  }\n\n  return date\n}\n\nexport default Clock\n","const firebaseConfig = {\n    apiKey: \"AIzaSyA5ZNxod7Id7oQLNAPC8aDO7maOoNcR69U\",\n    authDomain: \"chut2-c2958.firebaseapp.com\",\n    databaseURL: \"https://chut2-c2958-default-rtdb.firebaseio.com\",\n    projectId: \"chut2-c2958\",\n    storageBucket: \"chut2-c2958.appspot.com\",\n    messagingSenderId: \"861344867001\",\n    appId: \"1:861344867001:web:01cf3be224a6a9ac743168\"\n  };\n\nexport default firebaseConfig;","import './App.css'\nimport React, { useEffect, useState } from 'react'\nimport Clock from './Clock'\n\nimport firebase from 'firebase/app'\nimport 'firebase/firestore'\nimport 'firebase/auth'\nimport firebaseConfig from './firebaseConfig'\nimport { useAuthState } from 'react-firebase-hooks/auth'\n\nfirebase.initializeApp(firebaseConfig)\n\nconst auth = firebase.auth()\nconst firestore = firebase.firestore()\n\nvar localBusStops = []\n\nfunction SignIn() {\n  const signInWithGoogle = async () => {\n    const provider = new firebase.auth.GoogleAuthProvider()\n    await auth.signInWithPopup(provider)\n\n    firestore\n      .collection('accounts')\n      .doc(auth.currentUser.uid)\n      .get()\n      .then(async (doc) => {\n        if (doc.exists) {\n          console.log('account exists')\n\n          let userRef = firebase\n            .firestore()\n            .collection('accounts')\n            .doc(auth.currentUser.uid)\n        } else {\n          console.log('creating account...')\n          const account = {\n            useruid: auth.currentUser.uid,\n            name: auth.currentUser.displayName,\n            email: auth.currentUser.email,\n            busStops: [],\n          }\n\n          await firebase\n            .firestore()\n            .collection('accounts')\n            .doc(auth.currentUser.uid)\n            .set(account)\n        }\n      })\n  }\n  return (\n    <>\n      <div>\n        <h1 className=\"time\">Welcome to Chut-Chut</h1>\n        <p className=\"description\">\n          This web app stores bus stop #s in{' '}\n          <a className=\"description\" href=\"https://firebase.google.com/\">\n            Google Firebase\n          </a>{' '}\n          to display{' '}\n          <a\n            className=\"description\"\n            href=\"https://www.metrotransit.org/nextrip\"\n          >\n            NexTrip\n          </a>{' '}\n          all in one page. I created this app for my fellow public commuters to\n          conveniently check for arrival times because I am tired of waiting for\n          the{' '}\n          <a className=\"description\" href=\"https://www.metrotransit.org/\">\n            MetroTransit app\n          </a>{' '}\n          to load. Sign in to start feeling convenient. Best performance on a\n          mobile device.\n        </p>\n      </div>\n      <div>\n        <button className=\"sign-in\" onClick={signInWithGoogle}>\n          Sign in with Google\n        </button>\n      </div>\n    </>\n  )\n}\n\nfunction StopInput() {\n  const [newStop, setNewStop] = useState('')\n\n  async function addStopToDoc(e) {\n    e.preventDefault()\n    // console.log(newStop)\n    const response = await fetch(\n      `https://svc.metrotransit.org/NexTrip/${newStop}?format=json`\n    )\n    if (response.ok) {\n      localBusStops.push(newStop)\n      firestore\n        .collection('accounts')\n        .doc(auth.currentUser.uid)\n        .get()\n        .then(async (doc) => {\n          if (doc.exists) {\n            let userRef = firebase\n              .firestore()\n              .collection('accounts')\n              .doc(auth.currentUser.uid)\n\n            await userRef.update({\n              busStops: firebase.firestore.FieldValue.arrayUnion(newStop),\n            })\n\n            console.log(`added ${newStop}`);\n            \n          }\n        })\n      e.target.reset()\n    } else {\n      // console.log(response)\n      alert(`${newStop} is not a valid Metro Bus Stop ID.`)\n    }\n  }\n\n  return (\n    <form onSubmit={addStopToDoc}>\n      <label className=\"mr-sm-2\" htmlFor=\"busIDInput\">\n        Add Metro Bus Stop ID\n      </label>\n      <input\n        type=\"number\"\n        onChange={(e) => setNewStop(e.target.value)}\n        placeholder=\"16086\"\n        maxLength=\"5\"\n        max=\"99999\"\n        min=\"1\"\n        id=\"busIDInput\"\n        required\n      ></input>\n\n      <button className=\"add\" type=\"submit\" disabled={!newStop}>\n        Add\n      </button>\n    </form>\n  )\n}\n\nfunction removeStop(busStopID) {\n  // console.log(busStopID.toString())\n\n  localBusStops = localBusStops.filter((stop) => stop !== busStopID)\n  firestore\n    .collection('accounts')\n    .doc(auth.currentUser.uid)\n    .get()\n    .then(async (doc) => {\n      if (doc.exists) {\n        let userRef = firebase\n          .firestore()\n          .collection('accounts')\n          .doc(auth.currentUser.uid)\n\n        await userRef.update({\n          busStops: firebase.firestore.FieldValue.arrayRemove(\n            busStopID.toString()\n          ),\n        })\n      }\n    })\n}\n\nvar timer = 0\n\nfunction Arrivals(props) {\n  if (props.allStops.length == 0) {\n    var output = 'Fetching bus stops...'\n    timer++\n    console.log(timer);\n    if (timer >= 10) {\n      output = 'No bus stops in database'\n      return (\n        <div>\n          {' '}\n          <h2>{`${output}`}</h2>\n        </div>\n      )\n    }\n    else {\n      return (\n        <div>\n          {' '}\n          <h2>{`${output}`}</h2>\n        </div>\n      )\n    }\n  } \n  else {\n    return (\n      <div>\n        {props.allStops.map((stops, index) => {\n          return (\n            <div key={`${props.busStops[index]}_${index}`}>\n              <h2>\n                <a\n                  className=\"a-btn\"\n                  href={`https://www.metrotransit.org/nextrip/${props.busStops[index]}`}\n                  target=\"_blank\"\n                >\n                  {props.busStops[index]}\n                </a>\n\n                <button\n                  className=\"delete\"\n                  type=\"button\"\n                  onClick={(e) => removeStop(props.busStops[index])}\n                >\n                  &#10005;\n                </button>\n              </h2>\n              <table>\n                <thead>\n                  <tr>\n                    <th>Bus No.</th>\n                    <th>Time</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {(() => {\n                    if (stops && !stops.length) {\n                      return (\n                        <tr>\n                          <td> - </td>\n                          <td> - </td>\n                        </tr>\n                      )\n                    } else if (stops) {\n                      return stops.slice(0, 5).map((times, tIndex) => {\n                        return (\n                          <tr\n                            key={`${times.Route}_${times.DepartureTime}_${times.RouteDirection}`}\n                          >\n                            <td\n                              className={`td ${times.Actual ? 'active' : ''}`}\n                            >\n                              {times.Route}\n                            </td>\n                            <td\n                              className={`td ${times.Actual ? 'active' : ''}`}\n                            >\n                              {times.DepartureText}\n                            </td>\n                          </tr>\n                        )\n                      })\n                    }\n                  })()}\n                </tbody>\n              </table>\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n}\n\nconst App = () => {\n  const [user] = useAuthState(auth)\n\n  // const busStops = [16086, 16085, 877, 16111, 16183, 49881, 41243]\n\n  const initAllStops = [[{ Actual: false, DepartureText: 'Loading...' }]]\n\n  const [allStops, setAllStops] = useState([])\n\n  const getAllStops = async (localBusStops) => {\n    const data = await Promise.all(\n      localBusStops.map((busStop) => getArrivals(busStop))\n    )\n    return data\n  }\n\n  const generateKey = (name) => {\n    return `${name}_${new Date().getTime()}`\n  }\n\n  const getArrivals = async (stopNum) => {\n    const response = await fetch(\n      `https://svc.metrotransit.org/NexTrip/${stopNum}?format=json`\n    )\n    if (response.ok) {\n      const data = await response.json()\n      return data\n    }\n  }\n\n  const retrieveData = async () => {\n    let data = await getAllStops(localBusStops)\n    setAllStops(data)\n    // console.log(allStops)\n\n    if (user && auth.currentUser.uid) {\n      let gg = await firestore\n        .collection('accounts')\n        .doc(auth.currentUser.uid)\n        .get()\n\n      if (\n        localBusStops !== gg.data().busStops &&\n        localBusStops.length <= gg.data().busStops.length\n      ) {\n        localBusStops = gg.data().busStops\n      }\n    }\n  }\n\n  function SignOut() {\n    localBusStops = []\n    return (\n      auth.currentUser && (\n        <button\n          type=\"button\"\n          className=\"sign-out\"\n          onClick={() => {\n            auth.signOut().then(setAllStops(initAllStops))\n          }}\n        >\n          <span className=\"glyphicon glyphicon-log-out\"></span>\n        </button>\n      )\n    )\n  }\n\n  useEffect(() => {\n    if (user) {\n      const interval = setInterval(async () => {\n        retrieveData()\n      }, 1000)\n\n      return () => {\n        clearInterval(interval)\n      }\n    }\n  }, [allStops, localBusStops, user])\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\"></header>\n      {user ? (\n        <div className=\"main-disp\">\n          <Clock />\n          <div>\n            <h2>\n              Hello {auth.currentUser.displayName} <SignOut />\n            </h2>\n            <p className=\"signed-in-with\">\n              Signed in with {auth.currentUser.email}\n            </p>\n          </div>\n\n          <StopInput />\n\n          <Arrivals\n            key={generateKey('')}\n            allStops={allStops}\n            busStops={localBusStops}\n          />\n        </div>\n      ) : (\n        <SignIn />\n      )}\n    </div>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}